groups:
  - name: haproxy_split_brain
    rules:
      - alert: HaproxyPotentialSplitBrainError
        expr: count by(juju_unit) (rate({%%juju_topology%%} |~ `res_haproxy_.*_vip.*Bringing device (.*) up` [5m])) > 1
        for: 0s
        labels:
            severity: page
        annotations:
            summary: Potential split brain detected
